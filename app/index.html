<!doctype html>
<!--
Copyright 2017 LGS Innovations

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="Polymer Starter Kit">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>BITS</title>
    <meta name="description" content="BITS Integrated Technology System">

    <link rel="icon" href="./images/favicon.ico">

    <!-- See https://goo.gl/OOhYW5 -->
    <link rel="manifest" href="./manifest.json">

    <!-- See https://goo.gl/qRE0vM -->
    <meta name="theme-color" content="#03a9f4">

    <!-- Add to homescreen for Chrome on Android. Fallback for manifest.json -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="BITS">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="BITS">

    <!-- Homescreen icons -->
    <link rel="apple-touch-icon" href="./images/manifest/icon-48x48.png">
    <link rel="apple-touch-icon" sizes="72x72" href="./images/manifest/icon-72x72.png">
    <link rel="apple-touch-icon" sizes="96x96" href="./images/manifest/icon-96x96.png">
    <link rel="apple-touch-icon" sizes="144x144" href="./images/manifest/icon-144x144.png">
    <link rel="apple-touch-icon" sizes="192x192" href="./images/manifest/icon-192x192.png">

    <!-- Tile icon for Windows 8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="./images/manifest/icon-144x144.png">
    <meta name="msapplication-TileColor" content="#03a9f4">
    <meta name="msapplication-tap-highlight" content="no">

    <script>
      // Setup Polymer options
      window.Polymer = {
        dom: 'shadow',
        lazyRegister: true
      };
      // Setup BITS options
      window.BITS = {
        baseURI: window.location.href,
        rootPath: window.location.pathname
      };
      const appBase = document.createElement("base");
      appBase.setAttribute("href", document.baseURI);
      document.getElementsByTagName("head")[0].appendChild(appBase);

      console.debug('Site Base URL: ', window.BITS.baseURI);
      console.debug('Application Root Path: ', window.BITS.rootPath);

      // Load webcomponentsjs polyfill if browser does not support native
      // Web Components
      (function() {
        'use strict';

        let onload = function() {
          // For native Imports, manually fire WebComponentsReady so user code
          // can use the same code path for native and polyfill'd imports.
          if (!window.HTMLImports) {
            document.dispatchEvent(
              new CustomEvent('WebComponentsReady', {bubbles: true})
            );
          }
        };

        let webComponentsSupported = (
          'registerElement' in document
          && 'import' in document.createElement('link')
          && 'content' in document.createElement('template')
        );

        if (webComponentsSupported) {
          onload();
        } else {
          let script = document.createElement('script');
          script.async = true;
          script.src = './bower_components/webcomponentsjs/webcomponents-lite.min.js';
          script.onload = onload;
          document.head.appendChild(script);
        }
      })();

      // Load pre-caching Service Worker
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('./service-worker.js');
        });
      }
    </script>

    <link rel="import" href="./elements/base-app/base-app.html">

    <style>
      html, body, base-app {
        box-sizing: border-box;
        margin: 0px;
        padding: 0px;
        outline: 0px;
        border: 0px;
        min-height: 100vh;
      }
      html {
        overflow: hidden;
      }
      body {
        font-family: 'Roboto', 'Noto', sans-serif;
        line-height: 1.5;
        background-color: #fafafa;
      }
      base-app {
        min-width: 100vw;
      }
    </style>
  </head>
  <body>
    <base-app></base-app>
    <!-- Built with love using Polymer Starter Kit -->
  </body>
</html>
